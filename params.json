{"note":"Don't delete this file! It's used internally to help with page regeneration.","google":"","name":"Velocity.js","tagline":"velocity for js","body":"Velocity Template Language(VTL) for JavaScript\r\n---------------------------------------------\r\n\r\nJavaScript版本VTL，Velocity是基于Java的模板引擎，veloctiy.js是JS版本的实现。\r\n\r\n特点：\r\n\r\n- 语法分析和模板渲染分离(参考xtemplate方案)，本地编译模板\r\n- 基本完全支持velocity语法\r\n- 支持模板之间相互引用，依据kissy木块加载机制(可推及其他模块加载器)\r\n\r\n##Documents\r\n\r\n[velocity user guide](http://velocity.apache.org/engine/devel/user-guide.html)\r\n\r\n##Use\r\n\r\nvelocity.js使用分为web端和本地使用，web端作为一个模板引擎，本地作为node模板使用。\r\nweb端，使用build/velocity，本地通过npm安装`npm install velocity.js`。\r\n\r\n###On Web\r\n\r\nweb浏览器使用，作为KISSY的一个模块，编译通过`Cakefile`完成，同样可以编译适用其他\r\n库，使用js在`build/veloctiy/`目录中: \r\n\r\n- `index.js` Velocity解释器\r\n- `parse.js` Velocity语法分析器\r\n\r\n把语法分析和解释器分开，为了方便在本地编译语法书，在web端少做一些计算。本地编译\r\n模板的思路，源自KISSY的[xtemplate](http://docs.kissyui.com/docs/html/api/component/xtemplate/)。\r\n\r\n虽然语法解释器可以在浏览器端执行，但是，不推荐那么使用。\r\n\r\n第一种方式，解释和语法分析同时执行：\r\n\r\n  ```js\r\nKISSY.use('velocity/index, velocity/parse', function(S, Velocity, Parser){\r\n  var html = (S.all('#tpl').html());\r\n  var asts = Parser.parse(html);\r\n  var compile = new Velocity(asts);\r\n  console.log(compile.render());\r\n});\r\n  ```\r\n  \r\n第二种方式，线下编译：\r\n\r\n```\r\n使用velocity命令行工具打包\r\nveloctiy --build *.vm\r\nveloctiy -b *.vm\r\n```\r\n\r\n浏览器使用：\r\n\r\n```js\r\nKISSY.use('velocity/index, web/directives', function(S, Velocity, asts){\r\n  var compile = new Velocity(asts);\r\n  console.log(compile.render());\r\n});\r\n```\r\n\r\n###模板引用\r\n\r\n支持模板使用`#parse('file.vm')`形式引用其他模板，在web端引用依据kissy的模块加载\r\n机制。\r\n\r\n```html\r\n#parse(\"web/macro.vm\")\r\n#set( $parts = [\"volva\",\"stipe\",\"annulus\",\"gills\",\"pileus\"] )\r\n#set( $cellbgcol = \"#CC00FF\" )\r\n<table>\r\n  #tablerows( $cellbgcol $parts )\r\n</table>\r\n```\r\n\r\nmacro.vm中定义：\r\n\r\n```\r\n#macro( tablerows $color $somelist )\r\n  #foreach( $something in $somelist )\r\n    <tr><td bgcolor=$color>$something</td></tr>\r\n  #end\r\n#end\r\n```\r\n\r\n###On nodejs\r\n\r\nnode端和web端api使用一致。\r\n"}